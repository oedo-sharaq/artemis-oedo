anchor:
  - &idraw ["@plane@_raw.fID",128,-0.5,127.5]
  - &traw ["@plane@_raw.fTiming",200,-32000,-30000]
  - &qraw ["@plane@_raw.fCharge",200,0.,2000.]
  - &isprocessed ["@plane@.IsProcessed()",2,-0.5,1.5]
  - &isgood ["@plane@.IsGood()",2,-0.5,1.5]
  - &entry ["@plane@.GetEntriesFast()",8,-0.5,7.5]
  - &ssr ["@plane@.GetSSR()",100,0,10]
  - &res ["@plane@.GetResidual(0)",200,-2.,2.]
  - &x ["@track@.fX",200,-50.,50.]
  - &y ["@track@.fY",200,-50.,50.]

alias:
#  pidgate: "abs(f5pla[0].fTiming-dia3strip[0].fTiming-1242.0)<1.0 && abs(f5pla[0].fCharge-18200.)<900."
##  pidgate: gate.Test("54Sc")
#  qcut_x1: dc31_x1.fCharge >  300 && dc31_x1.fCharge < 500
#  qcut_x2: dc31_x2.fCharge >  300 && dc31_x2.fCharge < 500
#  qcut_y1: dc31_y1.fCharge >  300 && dc31_y1.fCharge < 500
#  qcut_y2: dc31_y2.fCharge >  300 && dc31_y2.fCharge < 500
#  qcut_x3: dc31_x3.fCharge >  200 && dc31_x3.fCharge < 400
#  qcut_x4: dc31_x4.fCharge >  200 && dc31_x4.fCharge < 400
#  qcut_y3: dc31_y3.fCharge >  200 && dc31_y3.fCharge < 400
#  qcut_y4: dc31_y4.fCharge >  200 && dc31_y4.fCharge < 400
#  tcut_x1: dc31_x1.fTiming > -1240 && dc31_x1.fTiming < -1190
#  tcut_x2: dc31_x2.fTiming > -1240 && dc31_x2.fTiming < -1190
#  tcut_y1: dc31_y1.fTiming > -1240 && dc31_y1.fTiming < -1190
#  tcut_y2: dc31_y2.fTiming > -1240 && dc31_y2.fTiming < -1190
#  tcut_x3: dc31_x3.fTiming > -1240 && dc31_x3.fTiming < -1190
#  tcut_x4: dc31_x4.fTiming > -1240 && dc31_x4.fTiming < -1190
#  tcut_y3: dc31_y3.fTiming > -1240 && dc31_y3.fTiming < -1190
#  tcut_y4: dc31_y4.fTiming > -1240 && dc31_y4.fTiming < -1190
#  y1y2hit: dc31_y1@.GetEntriesFast()>=1 && dc31_y2@.GetEntriesFast()>=1
#  x1x2hit: dc31_x1@.GetEntriesFast()>=1 && dc31_x2@.GetEntriesFast()>=1  
#  f7pla: f71pla@.GetEntriesFast() > 0
#  pid: abs(tof37-10)<10
 tof30 : sr0_a_cal.fTiming - dia3pad[0].fTiming;
 tof32 : dias2pad[0].fTiming - dia3pad[0].fTiming;
 s0.fX : sr0_xc0[0].fPosition + 49.28;
 s0xc  : s0.fX-24.0*(tof30-1066.);
 s2de  : 1.03827*S2ssd.fEx*0.866;
 s2brho: 4.4147*(1-sr0_x[0].fPosition/14856);
 s2beta: 103499.78 / ( 299.79 * tof32 - 299.79 * 1455. );
 s2gamma: 1/TMath::Sqrt(1-(s2beta)*(s2beta)); 
 s2aq  : s2brho * 299.79 / (s2gamma * s2beta * 931.49);
 de_v  : TMath::Log(5907.5*s2beta*s2beta)-TMath::Log(1.-s2beta*s2beta)-s2beta*s2beta; 
 s2z   : -0.0513 + 7.451*TMath::Sqrt(s2de/de_v) * s2beta; 
# vcut: TMath::Abs(s2z-20)<0.74;
 si23: TMath::Abs(s2z-14)<0.74&&TMath::Abs(s2aq-1.645)<0.01;
 si24: TMath::Abs(s2z-14)<0.74&&TMath::Abs(s2aq-1.71)<0.01;


group:
  - name: @plane@
    title: @plane@
    contents:
      - name: pid
        title: PID
        x: ["f5pla[0].fTiming-dia3strip[0].fTiming",200,1210,1270]
        y: ["f5pla[0].fCharge",200,0,25000.]

      - name: id
        title: @plane@ ID
        x: *idraw
      - name: time
        title: @plane@ Timing
        x: *traw
      - name: charge
        title: @plane@ Charge
        x: *qraw

      - name: id_traw
        title: @plane@ ID vs t_{raw}
        x: *idraw
        y: *traw
      - name: id_charge
        title: @plane@ ID vs charge
        x: *idraw
        y: *qraw
      - name: traw_charge
        title: @plane@ t_{raw} vs charge
        x: *traw
        y: *qraw

      - name: id_tcal
        title: @plane@ ID vs t_{raw}
        x: *idraw
        y: *traw
#      - name: entry
#        title: @plane@ Entry
#        x: *ent

      - name: hit_efficiency
        title: @plane@ hit efficiency IsProcessed
        x: *isprocessed
#        cut:  "src1_a_raw@.GetEntries() == 1"
      - name: tracking_efficiency
        title: @plane@ tracking efficiency
        x: *isgood
#        cut:  "src1_a_raw@.GetEntries() == 1"
      - name: ssr
        title: @plane@ sum of squared residue
        x: *ssr
#        cut:  "src1_a_raw@.GetEntries() == 1"
      - name: x1_residual
        title: @plane@ X1 residual
        x: *res
#        cut:  "src1_a_raw@.GetEntries() == 1"

      - name: track_x_si23
        title: @track@ X Si23
        x: *x
        cut:  si23
      - name: track_x_si24
        title: @track@ X Si24
        x: *x
        cut:  si24

  - name: @plane@_pidgate
    title: @plane@ (g pid)
    clone: @plane@
    cut: pidgate
    suffix: _pidgate

